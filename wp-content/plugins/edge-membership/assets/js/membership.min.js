if(function(e,t,o){var a,n=e.getElementsByTagName(t)[0];e.getElementById(o)||(a=e.createElement(t),a.id=o,a.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(a,n))}(document,"script","facebook-jssdk"),"undefined"!=typeof edgtSocialLoginVars)var facebookAppId=edgtSocialLoginVars.social.facebookAppId;facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.8"}),window.FB=FB}),function(e){"use strict";function t(){i(),s(),r(),d(),h()}function o(){c(),f(),v()}function a(){}function n(){}function i(){var t=e(".edgt-modal-opener"),o=e(".edgt-modal-holder");t.length&&o.length&&(t.click(function(t){t.preventDefault();var a=e(this),n=a.data("modal");o.fadeOut(300),o.removeClass("opened"),o.each(function(){var t=e(this);"undefined"!==t.data("modal")&&t.data("modal")==n&&(t.fadeIn(300),t.addClass("opened"))})}),o.each(function(){var t=e(this);t.click(function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),e(window).on("keyup",function(e){t.hasClass("opened")&&27==e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),t.find(".edgt-modal-content").click(function(e){e.stopPropagation()})}))}function s(){e(".edgt-login-form").on("submit",function(t){t.preventDefault();var o={action:"edgt_membership_login_user",security:e(this).find("#edgt-login-security").val(),login_data:e(this).serialize()};return e.ajax({type:"POST",data:o,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){var t;t=JSON.parse(e),l(t),"success"==t.status&&(window.location=t.redirect)}}),!1})}function r(){e(".edgt-register-form").on("submit",function(t){t.preventDefault();var o={action:"edgt_membership_register_user",security:e(this).find("#edgt-register-security").val(),register_data:e(this).serialize()};return e.ajax({type:"POST",data:o,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){var t;t=JSON.parse(e),l(t),"success"==t.status&&(window.location=t.redirect)}}),!1})}function d(){var t=e(".edgt-reset-pass-form");t.submit(function(o){o.preventDefault();var a={action:"edgt_membership_user_lost_password",user_login:t.find("#user_reset_password_login").val()};e.ajax({type:"POST",data:a,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){var t=JSON.parse(e);l(t),"success"==t.status&&(window.location=t.redirect)}})})}function l(t){var o,a=e(".edgt-membership-response-holder"),n=_.template(e(".edgt-membership-response-template").html());o="success"===t.status?"edgt-membership-message-succes":"edgt-membership-message-error";var i={messageClass:o,message:t.message},s=n(i);a.html(s)}function c(){e(".edgt-facebook-login-holder").submit(function(e){e.preventDefault(),window.FB.login(function(e){g(e)},{scope:"email, public_profile"})})}function g(e){"connected"===e.status?u():"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")}function u(){console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(t){var o=e(".edgt-facebook-login-holder [name^=edgt_nonce_facebook_login]").val();t.nonce=o,t.image=t.picture.data.url;var a={action:"edgt_membership_check_facebook_user",response:t};e.ajax({type:"POST",data:a,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){var t;t=JSON.parse(e),l(t),"success"==t.status&&(window.location=t.redirect)}})})}function f(){if("undefined"!=typeof edgtSocialLoginVars)var t=edgtSocialLoginVars.social.googleClientId;if(t)gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:t}),p()});else{e(".edgt-google-login-holder").submit(function(e){e.preventDefault()})}}function p(){e(".edgt-google-login-holder").submit(function(e){e.preventDefault(),window.auth2.signIn(),m()})}function m(){if(window.auth2.isSignedIn.get()){var t=window.auth2.currentUser.get(),o=t.getBasicProfile(),a=e(".edgt-google-login-holder [name^=edgt_nonce_google_login]").val(),n={id:o.getId(),name:o.getName(),email:o.getEmail(),image:o.getImageUrl(),link:"https://plus.google.com/"+o.getId(),nonce:a},i={action:"edgt_membership_check_google_user",response:n};e.ajax({type:"POST",data:i,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){var t;t=JSON.parse(e),l(t),"success"==t.status&&(window.location=t.redirect)}})}}function h(){var t=e("#edgt-membership-update-profile-form");if(t.length){var o=t.find("button"),a=o.data("updating-text"),n=o.data("updated-text");t.on("submit",function(t){t.preventDefault();var i=o.html();o.html(a);var s={action:"edgt_membership_update_user_profile",data:e(this).serialize()};return e.ajax({type:"POST",data:s,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){var t;t=JSON.parse(e),l(t),"success"==t.status?(o.html(n),window.location=t.redirect):o.html(i)}}),!1})}}function v(){var t=(e(".edgt-membership-main-wrapper"),e(".page-template-user-dashboard .edgt-content")),o=e(".edgt-page-footer"),a=0;if(!edgt.body.hasClass("edgt-header-transparent")&&edgt.windowWidth>1024&&(a=a+edgtGlobalVars.vars.edgtMenuAreaHeight+edgtGlobalVars.vars.edgtLogoAreaHeight),o.length>0&&(a+=o.outerHeight()),edgt.windowWidth>1024){var n=edgt.windowHeight-a;t.css({"min-height":n+"px"})}}var b={};"undefined"!=typeof edgt&&(edgt.modules.socialLogin=b),b.edgtUserLogin=s,b.edgtUserRegister=r,b.edgtUserLostPassword=d,b.edgtInitWidgetModal=i,b.edgtInitFacebookLogin=c,b.edgtInitGooglePlusLogin=f,b.edgtUpdateUserProfile=h,e(document).ready(t),e(window).load(o),e(window).resize(a),e(window).scroll(n)}(jQuery);